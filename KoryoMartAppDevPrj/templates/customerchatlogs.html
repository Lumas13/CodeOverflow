{% extends 'base.html' %}
{% block title %}Library Loan System - chat logs{% endblock %}

{% block content %}
<style>
    .filter{
position: relative;
display: flex;
justify-content: center;
width: 100%;
height: 100%;
padding: 20px 100px;
}

.contact-box {
max-width: 850px;
grid-template-columns: repeat(2, 1fr);
justify-content: center;
align-items: center;
text-align: left;
box-shadow: 0px 0px 19px 5px rgba(0, 0, 0, 0.19);
padding: 50px;
}
h2{
position: relative;
padding-bottom: 30px;
margin-bottom: 30px;
text-align: center;
}

h2:after{
content: '';
position: absolute;
left: 50%;
bottom: 0px;
transform: translateX(-50%);
height: 4px;
width: 80px;
border-radius: 2px;
background-color: #f1c232;
}
</style>


<div class="filter">
    <div class="contact-box">
        <h2 class="display-4">Customer Chat Log</h2>
        <div>
  {% if count == 0 %}
  <p>Chat log is empty.</p>
  {% elif count == 1 %}
  <p>1 Chat log recorded.</p>
  {% else %}
  <p>{{ count }} chat logs recorded.</p>
  {% endif %}
</div>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>User ID</th>
        <th>Customer Input</th>
        <th>Chatbot Reply</th>
      </tr>
    </thead>
    <tbody>
    {% for conversation in conversation_list%}
     <tr>
        <td>{{ conversation.get_user_id() }}</td>
        <td>{{ (conversation.get_sentence()) }}</td>
        <td>{{ conversation.get_return_choice() }}</td>
         <td>
          <form action="{{url_for('delete_conversation', id=conversation.get_conversation_id())}}" method="POST">


<button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#myModal_{{conversation.get_conversation_id()}}">
  Delete
</button>

<!-- The Modal -->
<div class="modal" id="myModal_{{conversation.get_conversation_id()}}">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Delete Confirmation</h4>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        Are you sure you want to delete Chat Log  {{conversation.get_conversation_id()}}?
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <input type="submit" value="Delete" class="btn btn-danger">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>

    </div>
  </div>
</div>
          </form>
        </td>
     </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
